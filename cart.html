<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopping Cart - Furniture Store</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <div class="logo">
        <a href="index.html">Furniture<span>Store</span></a>
      </div>
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="#">Living Room</a></li>
          <li><a href="#">Bedroom</a></li>
          <li><a href="#">Dining Room</a></li>
          <li><a href="#">Contact</a></li>
        </ul>
      </nav>
      <div class="cart">
        <a href="cart.html"><i class="fas fa-shopping-cart"></i> Cart (<span id="cart-count">0</span>)</a>
      </div>
    </div>
  </header>

  <!-- Shopping Cart Section -->
  <section class="cart-page">
    <div class="container">
      <h2>Shopping Cart</h2>
      <div class="cart-items">
        <!-- Cart items will be dynamically added here -->
      </div>
      <div class="cart-summary">
        <h3>Order Summary</h3>
        <p>Subtotal: <span id="subtotal">KSh 0</span></p>
        <p>Shipping: <span id="shipping">KSh 0</span></p>
        <p>Total: <span id="total">KSh 0</span></p>
        <button class="checkout-button">Proceed to Checkout</button>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-links">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Shop</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="#">Privacy Policy</a></li>
        </ul>
      </div>
      <div class="social-media">
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
      </div>
      <p>&copy; 2023 Furniture Store. All rights reserved.</p>
    </div>
  </footer>

  <!-- JavaScript for Cart Functionality -->
  <script>
    // Function to render cart items
    function renderCartItems() {
      const cartItemsContainer = document.querySelector(".cart-items");
      const subtotalElement = document.getElementById("subtotal");
      const shippingElement = document.getElementById("shipping");
      const totalElement = document.getElementById("total");
      const cartCountElement = document.getElementById("cart-count");
  
      // Get the cart from localStorage
      const cart = JSON.parse(localStorage.getItem("cart")) || [];
  
      let subtotal = 0;
      let shipping = 5000; // Fixed shipping cost
      let total = 0;
  
      // Clear existing items
      cartItemsContainer.innerHTML = "";
  
      // Render each cart item
      cart.forEach((item) => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;
  
        const cartItem = document.createElement("div");
        cartItem.classList.add("cart-item");
        cartItem.innerHTML = `
          <div class="item-image">
            <img src="${item.image}" alt="${item.name}">
          </div>
          <div class="item-details">
            <h3>${item.name}</h3>
            <p>KSh ${item.price.toLocaleString()}</p>
            <div class="quantity">
              <label for="quantity-${item.id}">Quantity:</label>
              <input type="number" id="quantity-${item.id}" value="${item.quantity}" min="1">
            </div>
            <button class="remove-item" data-id="${item.id}">Remove</button>
          </div>
        `;
        cartItemsContainer.appendChild(cartItem);
  
        // Add event listener for quantity change
        const quantityInput = cartItem.querySelector(`#quantity-${item.id}`);
        quantityInput.addEventListener("change", () => {
          updateCartItemQuantity(item.id, parseInt(quantityInput.value));
        });
      });
  
      // Calculate totals
      total = subtotal + shipping;
  
      // Update the DOM
      subtotalElement.textContent = `KSh ${subtotal.toLocaleString()}`;
      shippingElement.textContent = `KSh ${shipping.toLocaleString()}`;
      totalElement.textContent = `KSh ${total.toLocaleString()}`;
      cartCountElement.textContent = cart.length;
    }
  
    // Function to update the quantity of a cart item
    function updateCartItemQuantity(itemId, newQuantity) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      const item = cart.find((item) => item.id === itemId);
  
      if (item) {
        item.quantity = newQuantity;
        localStorage.setItem("cart", JSON.stringify(cart));
        renderCartItems(); // Re-render the cart to update totals
      }
    }
  
    // Function to remove an item from the cart
    function removeItemFromCart(itemId) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart = cart.filter((item) => item.id !== itemId);
      localStorage.setItem("cart", JSON.stringify(cart));
      renderCartItems(); // Re-render the cart to update totals
    }
  
    // Add event listeners for remove buttons
    document.addEventListener("click", (event) => {
      if (event.target.classList.contains("remove-item")) {
        const itemId = event.target.dataset.id;
        removeItemFromCart(itemId);
      }
    });
  
    // Initial render
    renderCartItems();
  </script>
</body>
</html>
